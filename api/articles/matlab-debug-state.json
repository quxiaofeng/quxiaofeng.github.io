{"title":"Matlab Debug State Checking","slug":"matlab-debug-state","date":"2014-03-13T06:36:25.000Z","updated":"2018-04-21T08:18:25.482Z","comments":true,"path":"api/articles/matlab-debug-state.json","photos":[],"link":"","excerpt":"GitHub Repo - balance/CheckDebug","covers":null,"content":"<h2 id=\"GitHub-Repo-balance-CheckDebug\"><a href=\"#GitHub-Repo-balance-CheckDebug\" class=\"headerlink\" title=\"GitHub Repo - balance/CheckDebug\"></a><a href=\"https://github.com/quxiaofeng/balance/tree/master/DebugStatus\" target=\"_blank\" rel=\"noopener\">GitHub Repo - balance/CheckDebug</a></h2><a id=\"more\"></a>\n<h2 id=\"Refactor-according-to-the-matlab-style-guide\"><a href=\"#Refactor-according-to-the-matlab-style-guide\" class=\"headerlink\" title=\"Refactor according to the matlab style guide\"></a>Refactor according to <a href=\"http://www.quxiaofeng.me/articles/matlab-coding-style/\">the matlab style guide</a></h2><h3 id=\"函数名\"><a href=\"#函数名\" class=\"headerlink\" title=\"函数名\"></a>函数名</h3><ol>\n<li><p>matlab 函数名一般使用小写<br>这里不是所有人都同意。matlab 内置函数一般使用小写，第三方程序有时使用混合大小写。但这里在使用时还是感觉全小写比较方便，混合大小写打字不方便，也容易记错。</p>\n</li>\n<li><p>返回值是<strong>逻辑变量</strong>，名称使用 <em>is</em>。<br>所以把函数名从<code>CheckDebugState</code>为 <code>isdebugging</code>。</p>\n</li>\n</ol>\n<h3 id=\"单元测试\"><a href=\"#单元测试\" class=\"headerlink\" title=\"单元测试\"></a>单元测试</h3><ol>\n<li><p>添加基本的测试： <code>1, true,  &#39;debug&#39;,   &#39;test&#39;, 0, false, &#39;release&#39;, &#39;run&#39;</code></p>\n</li>\n<li><p>添加后向兼容测试： <code>CheckDebugState</code></p>\n</li>\n<li><p>添加例程测试，测试例程输出与标准输出</p>\n</li>\n</ol>\n<h3 id=\"使用方法-例程\"><a href=\"#使用方法-例程\" class=\"headerlink\" title=\"使用方法 / 例程\"></a>使用方法 / 例程</h3><ol>\n<li>添加了一个简单的显示是否在调试状态的函数，作为使用该函数的例子</li>\n<li>使用<code>evalc</code>将例程打印输出转向到字符串，并保存。<code>fileread</code>读入文本文件，并比较结果。这种方法能比较程序输出，易于用来编写测试。</li>\n</ol>\n<h2 id=\"当前完成的函数\"><a href=\"#当前完成的函数\" class=\"headerlink\" title=\"当前完成的函数\"></a>当前完成的函数</h2><pre><code class=\"matlab\">\nfunction [ debug_state ] = isdebugging( debug_state )\n% isdebugging Check debug status to determine if it is debugging.\n%    debug_state = isdebugging(debug_state) parse a general debug\n%    description (a number, text, or a logical values) to a \n%    standard logical value.\n% \n% \n%    It returns true (in a debugging state) if the input is\n%       1, true, 'debug', 'test'.\n%    It returns false (in a non-debugging state) if the input is\n%       0, false, 'release', 'run'.\n%    Default (blank) input leads to false. (Not debugging)\n% \n% \n%    After using this function, debug related code in scripts and functions\n%    can be simply surrounded by\n% \n%        if debugState\n%            ...\n%        end\n% \n% \n%    In addition, the function using isdebugging can be formatted as\n% \n%         function displaydebugstate(vars, debugState)\n% \n%         debugState = isdebugging( debugState );\n% \n%         if debugState\n%             display 'debugging';\n%             result = 'debugging';\n%         else\n%             result = 'running';\n%         end\n% \n%         display(result);\n% \n%         end\n% \n%    For more information, see <a href=\"matlab:\n%    web('https://github.com/quxiaofeng/balance')\" target=\"_blank\" rel=\"noopener\">balance</a>.\n\n\nif nargin == 1\n    switch debug_state\n        case 1\n            debug_state = true;\n        case 0\n            debug_state = false;\n        case true\n            debug_state = true;\n        case false\n            debug_state = false;\n        case 'debug'\n            debug_state = true;\n        case 'release'\n            debug_state = false;\n        case 'test'\n            debug_state = true;\n        case 'run'\n            debug_state = false;\n        otherwise\n            display(['wrong debugflag(' ...\n                '1, true,  ''debug'',   ''test'', ' ...\n                '0, false, ''release'', ''run''   ',...\n                ')']);\n            debug_state = false;\n    end\nelse\n    debug_state = false;\nend\n\nend\n</code></pre>","categories":[{"name":"coding","slug":"coding","count":26,"path":"api/categories/coding.json"}],"tags":[{"name":"research","slug":"research","count":8,"path":"api/tags/research.json"},{"name":"testing","slug":"testing","count":3,"path":"api/tags/testing.json"},{"name":"matlab","slug":"matlab","count":5,"path":"api/tags/matlab.json"}]}